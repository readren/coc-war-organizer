<!--  @()(implicit request: RequestHeader)  -->

<div ng-controller='accountSettingsCtrl as asc' class="dib">
	<section class="panel panel-default">
		<header class="panel-heading">
			<h4>CoC account</h4>
		</header>
		<h4 style="display:flex">
			<label style="padding-right: .5em;">Current</label>
			<span style="min-width:14em; border:groove 3px; color:white; background-image:url('/assets/images/wild_oliva.png');" 
				 class="rea-flip pale-text-shadow" rea-vc-anim rea-vc-anim-set-inter="asc.currentAccountSetterInterceptor" rea-vc-anim-get-inter="asc.currentAccountGetterInterceptor" >
					{{asc.currentAccountGetterInterceptor(asc.getCurrentAccount).name}}
				
			</span>
		</h4>
		<div style="display:flex; justify-content:space-around">
			<div rea-drop-down rea-toggle="asc.toggleAccountSelector" >
				<button class="btn btn-default"	ng-click="asc.toggleAccountSelector()" ng-disabled="asc.accounts.length == 0">switch</button>
				<aside rea-drop-down-content class="am-fade" style="left:auto;">
					<table class="table">
						<thead style="font-style: italic;"><tr><th>name</th><th>description</th></tr></thead>
						<tbody>
							<tr ng-repeat="account in asc.accounts"
								ng-click="asc.setCurrentAccount(account)"
								ng-class="{ active: account == asc.getCurrentAccount() }">
								<td class="dark-text-shadow" style="min-width:14em">{{account.name}}</td>
								<td>{{account.description}}</td>
							</tr>
						</tbody>
					</table>
				</aside>
			</div>

			<div style="display:flex; align-content:space-around;" rea-drop-down rea-toggle="asc.toggleAccountAdder">
				<button class="btn btn-default" ng-click="asc.toggleAccountAdder()"	ng-disabled="asc.accounts.length >= 20">Add</button>
				<aside rea-drop-down-content class="am-fade" style="right:0; left:inherit;">
					<form class="form-inline" name="form">
						<input placeholder="name" required ng-model='asc.newAccountProject.name'
							bs-tooltip data-trigger="focus" data-placement="top"
							data-title="The CoC account name is the name of your village and the name you are seen by other players in the chat window" />
						<input placeholder="description" ng-model='asc.newAccountProject.description'
							bs-tooltip data-trigger="focus" data-placement="top"
							data-title="an optional description for the CoC account" />
						<nav class="actions">
							<button type="submit" ng-click='form.$valid && asc.addAccount()' class="btn btn-default">proceed</button>
						</nav>
					</form>
				</aside>
			</div>
		</div>
	</section>


</div>

